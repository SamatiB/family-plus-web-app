{% load static %}
<!-- Navbar shadow -->
<style>
  .navbar {
    -webkit-box-shadow: 0 8px 6px -5px #999;
    -moz-box-shadow: 0 8px 6px -5px #999;
    box-shadow: 0 8px 6px -5px #999;
}
</style>
<!-- First navbar -->
<nav class="navbar navbar-expand-md navbar-light bg-light" style="height: 100px;">
  <div class="container-fluid">
    <div class="navbar-collapse collapse" id="collapseNavbar">
      <ul class="navbar-nav">
        <li class="nav-item active" style="font-size: 40px">
          <a class="nav-link" href="{% url 'home' %}" style="color: rgb(77, 77, 77)">
            Family+
          </a>
        </li>
      </ul>

      <!-- Display family profile picture and family name. Users who haven't set up a
      family profile will have a prompt to set up a family profile instead. Users who
      didn't upload a profile picture will have a default one. -->
      {% if user.is_authenticated %}
      <ul class="navbar-nav ms-auto">
        <li class="nav-item">
            {% if user.familyprofile.id and user.familyprofile.profile_image %}
              <a class="nav-link" href="{% url 'family-profile' user.familyprofile.id %}" style="color: rgb(77, 77, 77); font-size: 17px; font-weight: 450;">
                <img src="{{ user.familyprofile.profile_image.url }}" class="rounded-circle" alt="" width="45" height="45">
                Hi {{ user.familyprofile.family_name|title }} Family
              </a>
            {% elif user.familyprofile.id and user.familyprofile.profile_image == "" %}
              <a class="nav-link" href="{% url 'family-profile' user.familyprofile.id %}">
                <img src="{% static 'website/images/default_profile_img/default1.jpg' %}" class="rounded-circle" alt="" width="45" height="45">
                Hi {{ user.familyprofile.family_name|title }} Family
              </a>
            {% else %}
              <a class="nav-link" href="{% url 'create-profile' %}">
                Hi (Set Up A Family Nickname)
              </a>
            {% endif %}
        </li>
      </ul>
      {% else %}
      <ul class="navbar-nav ms-auto" style="font-size: 20px;">
        <li class="nav-item">
          <li class="nav-link">
            <a class="nav-link" href="{% url 'register' %}" style="color: rgb(77, 77, 77); font-weight: 400;" >
              Sign Up
            </a>
          </li>
          <li class="nav-link">
            <a class="nav-link" href="{% url 'login' %}" style="color: rgb(77, 77, 77); font-weight: 400;" >
              Login
            </a>
          </li>
        </li>
      </ul>
      {% endif %}
    </div>
  </div>
</nav>

<!-- Second navbar under the first navbar -->
<nav class="navbar navbar-expand-md navbar-dark" style="background-color: #17A2B8;">
  <div class="container-fluid">
    <div class="navbar-collapse collapse w-100 order-1 order-md-0 dual-collapse2">
      <ul class="navbar-nav me-auto">
        <li class="nav-item active">
          <a class="nav-link" href="" style="color: rgba(255, 255, 255, 0.9); font-size: 20px;">About</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#" style="color: rgba(255, 255, 255, 0.9); font-size: 20px;">FAQ</a>
        </li>
      </ul>
    </div>
  </div>

  {% if user.is_authenticated %}
    <div class="navbar-collapse collapse w-100 order-3 dual-collapse2">
      <ul class="navbar-nav ms-auto">
        <!-- Search Page Link -->
        <li class="nav-item">
          <a class="nav-link" href="{% url 'search-page' %}" style="color: rgba(255, 255, 255, 0.9); font-size: 18px;">
            <i class="bi bi-search""></i>
            Search
          </a> 
        </li>
        <!-- Connection Request Page Link -->
        <li class="nav-item">
          <a class="nav-link" href="" style="color: rgba(255, 255, 255, 0.9); font-size: 18px;">
            <i class="bi bi-people-fill""></i>
            Requests
          </a> 
        </li>
        <!-- Notification Bell Dropdown Box -->
        <li class="nav-item">
          <a class="nav-link position-relative" href="" style="color: rgba(255, 255, 255, 0.9); font-size: 18px;">
            <i class="bi bi-bell-fill "></i>
            Notifications
          </a>
        </li>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" id="navbarScrollingDropdown" role="button"
            data-bs-toggle="dropdown" aria-expanded="false" style="color: rgba(255, 255, 255, 0.9); font-size: 18px;">
            <i class="bi bi-person-circle""></i>
            My Account
          </a>
          <div class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdown">

            <!-- Links to Profile page if profile is already set up. -->
              {% if user.familyprofile.id %}
                <a class="dropdown-item" href="{% url 'family-profile' user.familyprofile.id %}">Family Profile</a>

              <!-- Else links to Profile (Set Up) page. -->
              {% else %}
                <a class="dropdown-item" href="{% url 'create-profile' %}">Family Profile (Set up)</a>
              {% endif %}

              <!-- Links to Settings page and logout button shown for all logged in users. -->
              <a class="dropdown-item" href="{% url 'account-settings' %}">Settings</a>
              <a class="dropdown-item" href="{% url 'logout' %}">Logout</a>
          </div>
        </li>
      </ul>
    </div>
  {% endif %}
</nav>